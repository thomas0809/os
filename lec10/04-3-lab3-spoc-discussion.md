# lab3 SPOC思考题

=======

## 小组思考题
---
(1)(spoc) 请参考lab3\_result的代码，思考如何在lab3_results中实现clock算法，并给出你的概要设计方案，可4人一个小组，说明你的方案中clock算法与LRU算法上相比，潜在的性能差异性。并进一说明LRU算法在lab3实现的可能性评价（给出理由）。

> 在swap_init函数中，将
> 
> ```c
> sm = &swap_manager_fifo;
> ```
> 替换为clock算法，实现其各个函数指针。主要修改的函数是：
> 
> `swap_out_victim()`实现循环链表的扫描，经过访问位为0的点，则返回；经过访问位为1的点，赋为0继续查找。
> 
> 页表项要用一位来表示访问位，访问该页的时候修改访问位。（硬件实现）
> 
> clock算法与LRU算法相比，实现更加简单，使用的时间开销和空间开销更小，但是由于仅仅通过一位来区分该页最近被访问的情况，所以在缺页率上会高于LRU算法。
> 
> 不太可能在lab3实现LRU算法，因为LRU算法需要维护每一页最近被访问的时间，这首先在空间上需要大量的空间来存放某一页最近访问的时间，其次在时间上当发生缺页时我们需要找到最久没有被访问的页面，这会大幅增加时间开销，同时我们也需要相应的数据结构对此进行维护。

(2)(spoc) 理解内存访问的异常。在x86中内存访问会受到段机制和页机制的两层保护，请基于lab3_results的代码（包括lab1的challenge练习实现），请实践并分析出段机制和页机制各种内存非法访问的后果。可4人一个小组，找出尽可能多的各种内存访问异常，并在代码中给出实现和测试用例，在执行了测试用例后，ucore能够显示出是出现了哪种异常和尽量详细的错误信息。请在说明文档中指出：某种内存访问异常的原因，硬件的处理过程，以及OS如何处理，是否可以利用做其他有用的事情（比如提供比物理空间更大的虚拟空间）？哪些段异常是否可取消，并用页异常取代？

